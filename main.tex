% Template KLTN cho SV trường ĐHKHTN
% Liên hệ: huaanhminh0412@gmail.com
% Last update: 19/03/2021

\documentclass[oneside,a4paper,13pt]{extreport}

% Font size 13pt trong Word và trong LaTex khác nhau về mặt kích thước (LaTex nhỏ hơn) nên sử dụng 2 lệnh dưới đây giúp tăng font size lên
\usepackage{scrextend}
\changefontsizes{13pt}

% Font tiếng Việt
\usepackage[T5]{fontenc}
\usepackage[utf8]{inputenc}
\DeclareTextSymbolDefault{\DH}{T1}

% Chỉnh định dạng và style title các phần
\usepackage{tocloft,calc}
\usepackage[explicit]{titlesec}

% Format số trang
\usepackage{fancyhdr}
\usepackage{lastpage}

% Tài liệu tham khảo
\usepackage[
	sorting=nty,
	backend=bibtex,
	defernumbers=true]{biblatex}
\usepackage[unicode]{hyperref} % Bookmark tiếng Việt
\addbibresource{References/references.bib}
\usepackage{blindtext}

\makeatletter
\def\blx@maxline{77}
\makeatother

% Chèn hình, các hình trong luận văn được để trong thư mục Images/
\usepackage{graphicx}
\graphicspath{ {Images/} }

% Package quản lý mã nguồn
\usepackage{listings}
\usepackage{color}

% Cái package listings ngu học trong LaTex không support cho JS nên đó là lý do có một mớ này:
\lstdefinelanguage{JavaScript}{
	keywords={break, case, catch, continue, debugger, default, delete, do, else, finally, for, function, if, in, instanceof, new, return, switch, this, throw, try, typeof, var, void, while, with},
	morecomment=[l]{//},
	morecomment=[s]{/*}{*/},
	morestring=[b]',
	morestring=[b]",
	sensitive=true
}

% Chèn và định dạng mã nguồn
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=4
}
\lstset{style=mystyle}

% Chèn và định dạng mã giả
\usepackage{amsmath}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\makeatletter
\def\BState{\State\hskip-\ALG@thistlm}
\makeatother

% Bảng biểu
\usepackage{multirow}
\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

% Đổi tên mặc định
% Chapter -> Chương
% Figure -> Hình
% Table -> Bảng
% Table of Contents -> Mục lục (1)
% List of Figures -> Danh sách hình (2)
% List of Tables -> Danh sách bảng (3)
% Appendix -> Phụ lục (4)
% Note: Hiện tại các title ở các trang (1), (2), (3), (4) được định dạng kích thước Large (nhỏ hơn so với mặc định), và được canh giữa bằng 2 command \hfill đầu và cuối
\renewcommand{\chaptername}{Chương}
\renewcommand{\figurename}{Hình}
\renewcommand{\tablename}{Bảng}
\renewcommand{\contentsname}{\hfill\Large\centering Mục lục\hfill}
\renewcommand{\listfigurename}{\hfill\Large\centering Danh sách hình\hfill}
\renewcommand{\listtablename}{\hfill\Large\centering Danh sách bảng\hfill}
\renewcommand{\appendixname}{\hfill\Large\centering Phụ lục\hfill}
\renewcommand{\appendixname}{\hfill\Large\centering Phụ lục\hfill}
\renewcommand{\bibliography}{\hfill\Large\centering Tham khảo\hfill}
\renewcommand{\cftaftertoctitle}{\hfill}

% Dãn dòng 1.5 (line spacing = 1.5)
\usepackage{setspace}
\onehalfspacing

% Thụt vào đầu dòng
\usepackage{indentfirst}

% Canh lề (trên, dưới, trái, phải)
% Nếu định dạng canh lề trên dưới trái phải khác thì hãy chỉnh thông qua 4 biến bên dưới đây.
\newcommand{\topMargin}{30mm}
\newcommand{\bottomMargin}{35mm}
\newcommand{\leftMargin}{35mm}
\newcommand{\rightMargin}{20mm}

\usepackage[
  top=\topMargin,
  bottom=\bottomMargin,
  left=\leftMargin,
  right=\rightMargin,
  includefoot]{geometry}
  
% Trang bìa
\usepackage{tikz}
\usetikzlibrary{calc}
\newcommand\HRule{\rule{\textwidth}{1pt}}

\usepackage{pst-solides3d}

% Tên các sinh viên viết thường, nếu có nhiều hơn 2 sinh viên thì sử dụng \newcommand{\<tên_biến>}{tên~sv} để định dạng
% Note: dấu ~ trong tên khi build ra sẽ thành khoảng trắng. Ví dụ: Hứa~Anh~Minh -> Hứa Anh Minh
\newcommand{\firstStudent}{Hứa~Anh~Minh}
\newcommand{\secondStudent}{Nguyễn~Ngọc~Đăng~Khanh}

% Tên các sinh viên viết in hoa toàn bộ
\newcommand{\firstStudentUppercase}{HỨA~ANH~MINH}
\newcommand{\secondStudentUppercase}{NGUYỄN~NGỌC~ĐĂNG~KHANH}

% Mã số sinh viên
\newcommand{\firstStudentId}{1753070}
\newcommand{\secondStudentId}{1753134}

% Tên khóa luận / đồ án tốt nghiệp
\newcommand{\thesisNameUppercase}{XÂY~DỰNG~HỆ~THỐNG~PHÂN~TÍCH~\\SỰ~DI~CHUYỂN~CỦA~KHÁCH~HÀNG\\BẰNG~THỊ~GIÁC~MÁY~TÍNH}
\newcommand{\thesisNameLowercase}{Xây~Dựng~Hệ~Thống~Phân~Tích~Sự~Di~chuyển~Của~Khách~Hàng~Bằng~Thị~Giác~Máy~Tính}	

% Tên giáo viên hướng dẫn, nếu nhiều hơn 1 giáo viên hướng dẫn thì sử dụng lệnh \newcommand để tạo thêm biến cho giáo viên khác.
\newcommand{\tutorName}{Tiến~sĩ~Đinh~Bá~Tiến}
\newcommand{\tutorNameUppercase}{TIẾN~SĨ~ĐINH~BÁ~TIẾN}

\newcommand{\facultyName}{Khoa~Học~Máy~Tính~-~Công~Nghệ~Phần~<Mềm}

% Ngày xuất bản chính thức, thay ... bằng ngày tháng năm để hiển thị cho cả báo cáo
\newcommand{\releaseDate}{ngày~...~tháng~...~năm~...}


\renewcommand{\cftchappresnum}{Chương }
\AtBeginDocument{\addtolength\cftchapnumwidth{\widthof{\bfseries Chương }}}

% Custom level các section trong bookmark khi xem file PDF.
\usepackage[atend]{bookmark}
\bookmarksetup{
	numbered,
	addtohook={%
		\ifnum\bookmarkget{level}>1 %
		\bookmarksetup{numbered=false}%
		\fi
	},
}

% Custom lại title các section ở đầu trang thành canh giữa, kích thước Large, khoảng cách dòng giữa chữ Chương xx và tiêu đề là 10pt.
\titleformat{\chapter}[display] {\Large\bfseries\centering}{\filcenter\chaptertitlename\ \thechapter}
{10pt}{\Large\centering{#1}}

% Thêm dấu - vào giữa Chương xx và tên section trong mục lục.
% Mặc định: Chương 03 abcxyz
% Custom thành: Chương 03 - abcxyz
\renewcommand{\cftsecaftersnum}{~-~}
\renewcommand{\cftchapaftersnum}{~-~}
\renewcommand{\cftsubsecaftersnum}{~-~}

\begin{document}

% Front matter - những trang đầu

% Trang bìa
\input{FrontMatter/title.tex}

% Đánh số la mã cho các trang ở phần front matter
\pagenumbering{roman} % Đánh số i, ii, iii, ...
\pagestyle{plain}

% Trang dành cho người hướng dẫn và hội đồng viết nhận xét
\input{FrontMatter/comment-advisor.tex}
\newpage
\input{FrontMatter/comment-reviewer.tex}
\newpage

% Trong front matter hiện tại sẽ gồm các phần sau:
% Lời cảm ơn
% Mô tả
% Mục lục *
% Danh sách hình *
% Danh sách bảng *
% Đề cương chi tiết
% Note: các file tex cho các trang này (trừ những trang có *) sẽ được đặt trong thư mục FrontMatter
% Những trang có * là trang được config và thêm tự động vào bởi LaTex nên sẽ không cần thêm những trang đó.

% command \phantomsection để hyperlink trong mục lục trỏ đúng section
\phantomsection
\addcontentsline{toc}{chapter}{\mdseries Lời cảm ơn}
\include{FrontMatter/thanks}

\phantomsection
\addcontentsline{toc}{chapter}{\mdseries Mô tả}
\include{FrontMatter/syllabus}

\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{\mdseries Mục lục}
\tableofcontents
\newpage

\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{\mdseries Danh sách hình}
\listoffigures
\newpage

\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{\mdseries Danh sách bảng}
\listoftables
\newpage

\cleardoublepage
\phantomsection
\addcontentsline{toc}{chapter}{\mdseries Đề cương chi tiết}
\include{FrontMatter/abstract}

\clearpage

% Main chapters - những phần nội dung chính

% Những phần nội dung chính sẽ được đánh số 1, 2, 3,...

\pagenumbering{arabic} % Đánh số 1, 2, 3,...
\pagestyle{plain}

\include{MainChapters/chapter_1_introduction}

\include{MainChapters/chapter_2_computer_vision_background}

% Appendix - chứa trang chú thích và tài liệu tham khảo

% In tài liệu tham khảo

\phantomsection
\addcontentsline{toc}{chapter}{\mdseries Chú thích}
\include{Appendix/appendix}

\DeclareNameAlias{sortname}{last-first}
\DeclareNameAlias{default}{last-first}

\phantomsection
\addcontentsline{toc}{chapter}{\mdseries Tham khảo}
\printbibliography[title=Tham khảo]

% Phần phụ lục
%\include{Appendix/appendix1}
%\include{Appendix/appendix2}

\end{document} 